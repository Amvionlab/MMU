import{u as $,r as d,j as e,b as A}from"./index-DpzHKyVd.js";function k(){const{group:f,type:j,tag:y}=$(),[o,D]=d.useState(null),[v,N]=d.useState(!0),[b,R]=d.useState(null);if(d.useEffect(()=>{const n=decodeURIComponent(f),s=decodeURIComponent(j),a=decodeURIComponent(y),r=`${A}/backend/fetchDetailedView.php?group=${n}&type=${s}&tag=${a}`;fetch(r).then(t=>{if(!t.ok)throw new Error("Network response was not ok");return t.json()}).then(t=>{D(t),N(!1)}).catch(t=>{console.error("Error fetching data:",t),R(t.toString()),N(!1)})},[f,j,y]),v)return e.jsx("div",{children:"Loading..."});if(b)return e.jsxs("div",{children:["Error fetching data: ",b]});const m=parseFloat((o==null?void 0:o.asset_value)||0),w=new Date(o==null?void 0:o.purchase_date),S=new Date,T=.2,c=n=>{const s=String(n.getDate()).padStart(2,"0"),a=String(n.getMonth()+1).padStart(2,"0"),r=n.getFullYear();return`${s}-${a}-${r}`},E=((n,s,a,r)=>{let t=s.getFullYear();const l=a.getFullYear(),i=[];let x=n;for(;t<=l;){const p=new Date(t,s.getMonth(),s.getDate()),h=new Date(t+1,s.getMonth(),s.getDate()),u=x*r;x-=u;const g=t===l,F=g?(u*(a.getTime()-p.getTime())/(h.getTime()-p.getTime())).toFixed(2):u.toFixed(2);i.push({year:t,fromDate:c(p),toDate:c(g?a:h),depreciationAmount:F,remainingValue:x.toFixed(2),highlight:g&&a.getTime()<h.getTime()}),t++}return i})(m,w,S,T);return e.jsxs("div",{className:"font-sui mx-auto mt-2",children:[e.jsx("div",{className:"flex font-bold justify-between items-center mb-3",children:e.jsx("h1",{className:"text-lg ",children:"Detailed View"})}),e.jsxs("div",{className:"bg-white shadow-sm gap-2 rounded-lg overflow-hidden mb-4",children:[e.jsxs("div",{className:"bg-gray-50 px-4 py-5 border-b border-gray-200",children:[e.jsx("h2",{className:"text-lg leading-6 font-medium text-gray-900 mb-2",children:"Asset Details"}),e.jsxs("p",{className:"mt-1 text-sm font-medium text-prime",children:["Asset Value: ",e.jsxs("span",{className:"font-semibold text-flo",children:["Rs. ",isNaN(m)?"N/A":m]})]}),e.jsxs("p",{className:"mt-1 text-sm font-medium text-prime",children:["Procurement Date: ",e.jsx("span",{className:"font-semibold text-flo",children:c(w)})]})]}),e.jsxs("table",{className:"min-w-full bg-white",children:[e.jsx("thead",{className:"bg-gray-200 text-gray-600 uppercase text-sm leading-normal",children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-3 px-6 text-left",children:"Year"}),e.jsx("th",{className:"py-3 px-6 text-left",children:"From Date"}),e.jsx("th",{className:"py-3 px-6 text-left",children:"To Date"}),e.jsx("th",{className:"py-3 px-6 text-left",children:"Depreciation Amount"}),e.jsx("th",{className:"py-3 px-6 text-left",children:"Remaining Value"})]})}),e.jsx("tbody",{className:"text-gray-600 text-sm font-light",children:E.map(({year:n,fromDate:s,toDate:a,depreciationAmount:r,remainingValue:t,highlight:l},i)=>e.jsxs("tr",{className:`border-b border-gray-200 hover:bg-gray-100 transition font-semibold duration-300 ease-in-out ${l?"text-flo":""}`,children:[e.jsx("td",{className:"py-3 px-6 text-left whitespace-nowrap",children:n}),e.jsx("td",{className:"py-3 px-6 text-left",children:s}),e.jsx("td",{className:"py-3 px-6 text-left",children:a}),e.jsxs("td",{className:"py-3 px-6 text-left",children:["Rs. ",r]}),e.jsxs("td",{className:"py-3 px-6 text-left",children:["Rs. ",t]})]},i))})]})]})]})}export{k as default};
