import{u as U,r,j as t,b as $}from"./index-DpzHKyVd.js";function F(){const{group:d,type:i,tag:g}=U(),[w,C]=r.useState(null),[M,h]=r.useState(!0),[u,N]=r.useState(null),[p,m]=r.useState(null),[S,x]=r.useState(!1);if(r.useEffect(()=>{const s=decodeURIComponent(d),a=decodeURIComponent(i),n=decodeURIComponent(g);console.log("Decoded parameters:",{decodedGroup:s,decodedType:a,decodedTag:n});const o=`${$}/backend/fetchDetailedView.php?group=${s}&type=${a}&tag=${n}`;console.log("Fetching URL:",o),fetch(o).then(e=>{if(!e.ok)throw new Error("Network response was not ok");return e.json()}).then(e=>{console.log("Fetched data:",e),C(e),h(!1)}).catch(e=>{console.error("Error fetching data:",e),N(e.toString()),h(!1)})},[d,i,g]),M)return t.jsx("div",{children:"Loading..."});if(u)return t.jsxs("div",{children:["Error fetching data: ",u]});const{amc_from:f,amc_to:v,amc_interval:D}=w;console.log("AMC Details:",{amc_from:f,amc_to:v,amc_interval:D});const y=(s,a,n)=>{const o=[];let e=new Date(s);for(;e<=a;)o.push(new Date(e)),e.setMonth(e.getMonth()+n);return o},k=new Date(f),b=new Date(v),l=new Date,c=y(k,b,parseInt(D)),E=s=>{m(s),x(!0)},I=()=>{x(!1),m(null)};return t.jsxs("div",{className:"font-sui",children:[t.jsx("div",{className:"flex font-bold justify-between items-center mb-3",children:t.jsx("h1",{className:"text-xl",children:"AMC Details"})}),t.jsx("div",{className:"grid grid-cols-4 gap-x-12 gap-y-4 p-4",children:c.map((s,a)=>{const n=s;let o;a+1<c.length?o=c[a+1]:o=b;let e="";n<l?e="bg-red-200 hover:bg-red-300":n.getFullYear()===l.getFullYear()&&n.getMonth()===l.getMonth()?e="bg-white":e="bg-green-200 hover:bg-green-300";const j={year:"numeric",month:"long",day:"numeric"},L=n.toLocaleDateString(void 0,j),R=new Date(o-1).toLocaleDateString(void 0,j);return t.jsxs("div",{className:`p-4 ${e} text-sm font-semibold shadow-sm
        hover:text-sm transition-all duration-700 text-center rounded-lg
        hover:rounded-3xl 
        cursor-pointer`,onClick:()=>E(n),children:[t.jsx("p",{children:L}),t.jsx("p",{children:"to"}),t.jsx("p",{children:R})]},a)})}),S&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center",children:t.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-lg w-1/4",children:[t.jsx("h2",{className:"text-lg font-bold",children:"AMC  Notes"}),t.jsxs("p",{children:["Date: ",p&&p.toLocaleDateString()]}),t.jsx("button",{onClick:I,className:"mt-4 px-4 py-2 bg-blue-500 text-white rounded",children:"Close"})]})})]})}export{F as default};
