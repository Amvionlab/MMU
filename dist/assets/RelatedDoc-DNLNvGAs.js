import{G as N,u as v,r as a,b as i,j as e,l as y,m as F}from"./index-DpzHKyVd.js";function D(r){return N({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M400 317.7h73.9V656c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V317.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 163a8 8 0 0 0-12.6 0l-112 141.7c-4.1 5.3-.4 13 6.3 13zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"},child:[]}]})(r)}const S=()=>{const{tag:r}=v(),[f,h]=a.useState([]),c=decodeURIComponent(r),[b,x]=a.useState(!0),[n,o]=a.useState(null),[m,g]=a.useState(null),[j,l]=a.useState(!1);a.useEffect(()=>{p()},[c]);const p=async()=>{x(!0);try{const s=await fetch(`${i}/backend/fetchDocuments.php?action=fetch&tag=${c}`);if(!s.ok)throw new Error("Network response was not ok");const t=await s.json();t.error?(o(t.error),h([])):h(t)}catch{o("Error fetching files")}finally{x(!1)}},w=async s=>{s.preventDefault();const t=new FormData;if(m){t.append("userfile",m),t.append("tag",c);try{const d=await fetch(`${i}/backend/fetchDocuments.php?action=upload`,{method:"POST",body:t});if(!d.ok)throw new Error("Failed to upload file");const u=await d.json();u.success?(await p(),l(!1)):o(u.error)}catch{o("Error uploading file")}}};return b?e.jsx("div",{className:"text-center py-4",children:"Loading..."}):n?e.jsxs("div",{className:"text-center py-4 text-red-600",children:["Error: ",n]}):e.jsxs("div",{className:"-ml-3 -mr-3 pr-7 pl-7 overflow-hidden",children:[e.jsxs("div",{className:"flex font-bold justify-between items-center mb-2 p-2",children:[e.jsx("h1",{className:"text-lg ",children:"Asset Documents"}),e.jsxs("button",{className:"flex text-xs items-center px-3 py-1 bg-box border border-gray-400 shadow-inner text-prime rounded hover:shadow-md hover:border-prime transition-transform transform hover:scale-110",onClick:()=>l(!0),children:[e.jsx(D,{className:"w-3 h-3 mr-2 font-bold"}),"Add Files"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-5",children:f.map(s=>e.jsxs("div",{className:"rounded-lg shadow-sm  border bg-box ",children:[e.jsx("div",{className:"p-2 mb-2",children:e.jsxs("div",{className:"flex justify-between space-x-2 mt-1 text-xs text-prime font-bold",children:[e.jsx("h1",{className:"text-flo",children:s.name}),e.jsx("h1",{children:s.post_date}),e.jsxs("div",{className:"flex",children:[e.jsx("a",{href:`/asset_doc_download.php?file=${s.path}&filename=${s.attachmentname}`,className:"bg-box  mr-2 text-green-500 border px-1 py-1 text-xs rounded flex items-center space-x-1 hover:bg-second",children:e.jsx(y,{className:"w-3 h-3"})}),e.jsx("button",{className:"bg-box text-red-500 border px-1 py-1 text-xs rounded-md flex items-center space-x-1 hover:bg-second",onClick:()=>k(s.attachment_id),children:e.jsx(F,{className:"w-3 h-3 "})})]})]})}),e.jsx("div",{className:"flex justify-center rounded-lg bg-box",children:e.jsx("img",{src:`${i}/${s.path}`,alt:s.attachmentname,className:"h-44 border w-auto hover:z-10 rounded-lg transition-transform transform hover:scale-125"})})]},s.id))}),j&&e.jsx("div",{className:"fixed inset-0 bg-gray-800 bg-opacity-75 flex justify-center items-center z-50",children:e.jsxs("div",{className:"bg-white rounded lg:w-1/3 md:w-1/2 w-full p-8",children:[e.jsx("h5",{className:"text-lg font-bold mb-4",children:"Upload File"}),n&&e.jsx("p",{className:"text-red-600 mb-4",children:n}),e.jsxs("form",{onSubmit:w,children:[e.jsx("div",{className:"mb-4",children:e.jsx("input",{type:"file",onChange:s=>g(s.target.files[0]),className:"border rounded px-4 py-2 w-full",required:!0})}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx("button",{type:"button",className:"bg-gray-500 text-white px-4 py-2 rounded",onClick:()=>l(!1),children:"Cancel"}),e.jsx("button",{type:"submit",className:"bg-blue-500 text-white px-4 py-2 rounded",children:"Upload"})]})]})]})})]})},k=r=>{console.log("Deleting file with ID:",r)};export{S as default};
